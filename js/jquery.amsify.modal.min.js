// Amsify42 Modal 1.0.0
// http://www.amsify42.com
!function(a,o,e){function t(a){var o=v;a!==e&&a.messageModal!==e&&(o=a.messageModal),d(o,a)}function d(a,t){AmsifyHelper.detectIE()?o(a).html()===e&&p(a,"message",t):o(a).length||p(a,"message",t)}function l(a){var o=T,t=x,d=M,l=A;a!==e&&(a.confirmModal!==e&&(o=a.confirmModal),a.confirmSelector!==e&&(t=a.confirmSelector),a.confirmText!==e&&(d=a.confirmText),a.type!==e&&(l=a.type)),n(o,t,d,l,a),s(o,l,a)}function n(t,d,l,n,s){AmsifyHelper.detectIE()?o(t).html()===e&&p(t,"confirm",s):o(t).length||p(t,"confirm",s),"materialize"==n?(o(".modal").modal(),o(document).on("click",d,function(){r(this,t,".confirm-action-link"),o(t).find(".confirmation-text").text(l),o(t).modal("open"),o(t).modal({complete:function(){o(t).find("#confirm-id").val(0),o(t).find(".confirm-action-link").attr("data-href",""),o(t).find(".confirmation-text").text(""),o(".progress").addClass("hidden")}})})):"bootstrap"==n?o(document).on("click",d,function(){r(this,t,".confirm-action-link"),o(t).find(".confirmation-text").text(l),o(t).modal("show"),o(t).on("hide.bs.modal",function(a){o(t).find("#confirm-id").val(0),o(t).find(".confirm-action-link").attr("data-href",""),o(t).find(".confirmation-text").text(""),o(".progress").addClass("hidden")})}):o(document).on("click",d,function(){r(this,t,".confirm-action-link"),o(t).find(".confirmation-text").text(l),a.show(t)})}function s(e,t,d){o(document).on("click",e+" .confirm-action-link",function(e){e.preventDefault(),o(".progress").removeClass("hidden"),o(this).attr("data-href")?(o(this).addClass("disabled").prop("disabled",1).html(w),window.location=o(this).attr("data-href")):o(this).attr("data-ajax")&&a.callAjax(this,t,"confirm",d)})}function i(a){var o=C,t=k,d=M,l=A;a!==e&&(a.loadModal!==e&&(o=a.loadModal),a.loadClick!==e&&(t=a.loadClick),a.confirmText!==e&&(d=a.confirmText),a.type!==e&&(l=a.type)),m(o,t,d,l,a),c(o,l,a)}function m(t,d,l,n,s){AmsifyHelper.detectIE()?o(t).html()===e&&p(t,"load",s):o(t).length||p(t,"load",s),"materialize"==n?(o(".modal").modal(),o(document).on("click",d,function(){var a=this,e=o(this).data("href");o(".modal-body-loader").show(),o(t).modal("open"),o(t).modal({complete:function(){o("#default-modal-Label").html(""),o(".default-modal-content").html(""),o(".modal-body-loader").hide()}});var d={};d.afterSuccess=function(e){o("#default-modal-Label").html(e.title),o(".default-modal-content").html(e.html),o(".modal-body-loader").hide(),r(a,t,".confirm-action-form")},d.complete=function(e){AmsifyHelper.callback(s,"afterLoad",o(a),"after-load")},AmsifyHelper.callAjax(e,{},d,"GET")})):"bootstrap"==n?(o(document).on("click",d,function(){var a=this,e=o(this).data("href");o(".modal-body-loader").show(),o(t).modal("show");var d={};d.afterSuccess=function(e){o("#default-modal-Label").html(e.title),o(".default-modal-content").html(e.html),o(".modal-body-loader").hide(),r(a,t,".confirm-action-form")},d.complete=function(e){AmsifyHelper.callback(s,"afterLoad",o(a),"after-load")},AmsifyHelper.callAjax(e,{},d,"GET")}),o(t).on("hidden.bs.modal",function(a){o("#default-modal-Label").html(""),o(".default-modal-content").html(""),o(".modal-body-loader").hide()})):o(document).on("click",d,function(){var e=this,d=o(this).data("href");o(".modal-body-loader").show(),a.show(t);var l={};l.afterSuccess=function(a){o("#default-modal-Label").html(a.title),o(".default-modal-content").html(a.html),o(".modal-body-loader").hide(),r(e,t,".confirm-action-form")},l.complete=function(a){AmsifyHelper.callback(s,"afterLoad",o(e),"after-load")},AmsifyHelper.callAjax(d,{},l,"GET")})}function c(e,t,d){o(document).on("click",e+" .confirm-action-form",function(e){e.preventDefault(),o(".progress").removeClass("hidden"),o(this).attr("data-ajax")?a.callAjax(this,t,"load",d):o(this).parent("form").submit()})}function r(a,e,t){o(a).attr("data-href")&&o(e).find(t).attr("data-href",o(a).attr("data-href")),o(a).attr("data-ajax")&&(o(e).find(t).attr("data-ajax",o(a).attr("data-ajax")),o(a).attr("data-type")?o(e).find(t).attr("data-type",o(a).attr("data-type")):o(e).find(t).attr("data-type","delete"),o(a).attr("data-content")?(o(e).find(t).attr("data-index",o(a).closest("div").index()),o(e).find(t).attr("data-content",o(a).attr("data-content"))):(o(e).find(t).attr("data-index",o(a).closest("tr").index()),o(e).find(t).attr("data-content","table")),o(a).attr("data-ajax-redirect")&&o(e).find(t).attr("data-ajax-redirect",o(a).attr("data-ajax-redirect")))}function f(e,t){"bootstrap"==t?o(e).modal("hide"):"materialize"==t?o(e).modal("close"):a.hide(e)}function p(a,o,e){var t={};"confirm"==o?t=h(a,e):"load"==o?t=b(a,e):"message"==o&&(t=u(a,e)),AmsifyHelper.addHTML(t)}function u(a,o){var t=A;return o!==e&&o.type!==e&&(t=o.type),"bootstrap"==t?[{"<div/>":{id:a.substring(1),"class":"modal fade"},prependTo:"body"},{"<div/>":{"class":"modal-dialog message-modal-dialog"},appendTo:a},{"<div/>":{"class":"modal-content message-modal-content"},appendTo:".message-modal-dialog"},{"<div/>":{"class":"modal-header message-modal-header"},appendTo:".message-modal-content"},{"<button/>":{type:"button","data-dismiss":"modal","aria-hidden":"true","class":"close"},appendTo:".message-modal-header"},{"<h4/>":{"class":"modal-title message-modal-title",text:"Message"},appendTo:".message-modal-header"},{"<div/>":{"class":"modal-body message-modal-body message-text"},appendTo:".message-modal-content"},{"<div/>":{"class":"modal-footer message-modal-footer"},appendTo:".message-modal-content"},{"<a/>":{"class":"btn btn-success",text:"Close",href:"#","data-dismiss":"modal"},appendTo:".message-modal-footer"}]:"materialize"==t?[{"<div/>":{id:a.substring(1),"class":"modal"},prependTo:"body"},{"<div/>":{"class":"modal-content message-modal-content"},appendTo:a},{"<h4/>":{"class":"modal-title message-modal-title",text:"Message"},appendTo:".message-modal-content"},{"<div/>":{"class":"message-text"},appendTo:".message-modal-content"},{"<div/>":{"class":"modal-footer message-modal-footer"},appendTo:a},{"<a/>":{"class":"modal-action modal-close waves-effect waves-green btn-flat",text:"Close",href:"#","data-dismiss":"modal"},appendTo:".message-modal-footer"}]:[{"<div/>":{id:a.substring(1),"class":"amsify-modal"},prependTo:"body"},{"<div/>":{"class":"modal-content message-modal-content"},appendTo:a},{"<div/>":{"class":"modal-header message-modal-header message-modal-title",text:"Message"},appendTo:".message-modal-content"},{"<div/>":{"class":"modal-body message-modal-body"},appendTo:".message-modal-content"},{"<p/>":{"class":"message-text",text:"Are you sure?"},appendTo:".message-modal-body"},{"<div/>":{"class":"modal-footer message-modal-footer"},appendTo:".message-modal-content"},{"<a/>":{"class":"modal-btn btn-green amsify-modal-close",text:"Close",href:"#"},appendTo:".message-modal-footer"}]}function h(a,o){var t=A;return o!==e&&o.type!==e&&(t=o.type),"bootstrap"==t?[{"<div/>":{id:a.substring(1),"class":"modal fade"},prependTo:"body"},{"<div/>":{"class":"modal-dialog confirm-modal-dialog"},appendTo:a},{"<div/>":{"class":"modal-content confirm-modal-content"},appendTo:".confirm-modal-dialog"},{"<div/>":{"class":"modal-header confirm-modal-header"},appendTo:".confirm-modal-content"},{"<button/>":{type:"button","data-dismiss":"modal","aria-hidden":"true","class":"close"},appendTo:".confirm-modal-header"},{"<h4/>":{"class":"modal-title confirm-modal-title",text:"Confirmation"},appendTo:".confirm-modal-header"},{"<div/>":{"class":"modal-body confirm-modal-body confirmation-text"},appendTo:".confirm-modal-content"},{"<div/>":{"class":"modal-footer confirm-modal-footer"},appendTo:".confirm-modal-content"},{"<a/>":{"class":"btn btn-warning danger confirm-action-link",text:"Confirm",href:"#"},appendTo:".confirm-modal-footer"},{"<a/>":{"class":"btn btn-success",text:"Cancel",href:"#","data-dismiss":"modal"},appendTo:".confirm-modal-footer"}]:"materialize"==t?[{"<div/>":{id:a.substring(1),"class":"modal"},prependTo:"body"},{"<div/>":{"class":"modal-content confirm-modal-content"},appendTo:a},{"<h4/>":{"class":"modal-title confirm-modal-title",text:"Confirmation"},appendTo:".confirm-modal-content"},{"<div/>":{"class":"confirmation-text"},appendTo:".confirm-modal-content"},{"<div/>":{"class":"modal-footer confirm-modal-footer"},appendTo:a},{"<a/>":{"class":"modal-action waves-effect waves-red btn-flat confirm-action-link",text:"Confirm",href:"#"},appendTo:".confirm-modal-footer"},{"<a/>":{"class":"modal-action modal-close waves-effect waves-green btn-flat",text:"Cancel",href:"#","data-dismiss":"modal"},appendTo:".confirm-modal-footer"}]:[{"<div/>":{id:a.substring(1),"class":"amsify-modal"},prependTo:"body"},{"<div/>":{"class":"modal-content confirm-modal-content"},appendTo:a},{"<div/>":{"class":"modal-header confirm-modal-header",text:"Modal Header"},appendTo:".confirm-modal-content"},{"<div/>":{"class":"modal-body confirm-modal-body"},appendTo:".confirm-modal-content"},{"<p/>":{"class":"confirmation-text",text:"Are you sure?"},appendTo:".confirm-modal-body"},{"<div/>":{"class":"modal-footer confirm-modal-footer"},appendTo:".confirm-modal-content"},{"<a/>":{"class":"modal-btn btn-red confirm-action-link",text:"Confirm",href:"#"},appendTo:".confirm-modal-footer"},{"<a/>":{"class":"modal-btn btn-green amsify-modal-close",text:"Cancel",href:"#"},appendTo:".confirm-modal-footer"}]}function b(a,o){var t=A;return o!==e&&o.type!==e&&(t=o.type),"bootstrap"==t?[{"<div/>":{id:a.substring(1),"class":"modal fade"},prependTo:"body"},{"<div/>":{"class":"modal-dialog modal-lg load-modal-dialog"},appendTo:a},{"<div/>":{"class":"modal-content load-modal-content"},appendTo:".load-modal-dialog"},{"<div/>":{"class":"modal-header load-modal-header"},appendTo:".load-modal-content"},{"<button/>":{type:"button","data-dismiss":"modal","aria-hidden":"true","class":"close"},appendTo:".load-modal-header"},{"<h4/>":{id:"default-modal-Label","class":"modal-title load-modal-title",text:""},appendTo:".load-modal-header"},{"<div/>":{"class":"modal-body-loader fill-background"},appendTo:".load-modal-content"},{"<div/>":{"class":"modal-body load-modal-body default-modal-content"},appendTo:".load-modal-content"},{"<div/>":{"class":"modal-footer load-modal-footer"},appendTo:".load-modal-content"},{"<a/>":{"class":"btn btn-success",text:"Close",href:"#","data-dismiss":"modal"},appendTo:".load-modal-footer"}]:"materialize"==t?[{"<div/>":{id:a.substring(1),"class":"modal modal-fixed-footer"},prependTo:"body"},{"<div/>":{"class":"modal-content load-modal-content"},appendTo:a},{"<h4/>":{id:"default-modal-Label","class":"modal-title load-modal-title",text:""},appendTo:".load-modal-content"},{"<div/>":{"class":"modal-body-loader fill-background"},appendTo:".load-modal-content"},{"<div/>":{"class":"default-modal-content"},appendTo:".load-modal-content"},{"<div/>":{"class":"modal-footer load-modal-footer"},appendTo:a},{"<a/>":{"class":"modal-action modal-close waves-effect waves-green btn-flat",text:"Close",href:"#","data-dismiss":"modal"},appendTo:".load-modal-footer"}]:[{"<div/>":{id:a.substring(1),"class":"amsify-modal"},prependTo:"body"},{"<div/>":{"class":"modal-content modal-large load-modal-content"},appendTo:a},{"<div/>":{id:"default-modal-Label","class":"modal-header load-modal-header",text:"Modal Header"},appendTo:".load-modal-content"},{"<div/>":{"class":"modal-body-loader fill-background"},appendTo:".load-modal-content"},{"<div/>":{"class":"modal-body load-modal-body"},appendTo:".load-modal-content"},{"<p/>":{"class":"default-modal-content"},appendTo:".load-modal-body"},{"<div/>":{"class":"modal-footer load-modal-footer"},appendTo:".load-modal-content"},{"<a/>":{"class":"modal-btn btn-green amsify-modal-close",text:"Close",href:"#"},appendTo:".load-modal-footer"}]}function y(){o(document).on("click",".amsify-modal-close",function(o){o.preventDefault(),o.stopImmediatePropagation(),a.hide(".amsify-modal")})}function g(a){a!==e&&(a.hasOwnProperty("type")&&(A=a.type),a.hasOwnProperty("confirmSelector")&&(x=a.confirmSelector),a.hasOwnProperty("confirmText")&&(M=a.confirmText))}var v="#default-message-modal",T="#default-confirm-modal",x=".amsify-modal-confirm",M="Are you sure, you want to proceed?",w="Submitting...",C="#default-load-modal",k=".amsify-modal-load",A="";o.amsifyMessageModal=function(o){a.setMessageModal(o)},o.amsifyShowMessage=function(o,e,t){a.showMessage(o,e,t)},o.amsifyConfirmModal=function(o){a.setConfirmModal(o)},o.amsifyLoadModal=function(o){a.setLoadModal(o)},a.init=function(o){g(o);var e=new a.Modal;e.set()},a.set=function(o){var e=new a.Modal;e.set(o)},a.Modal=function(){a.Modal.prototype.set=function(o){o!==e?(a.setMessageModal(o),a.setConfirmModal(o),a.setLoadModal(o)):(a.setMessageModal(),a.setConfirmModal(),a.setLoadModal()),AmsifyHelper.bodyLoaderIEfix("modal")}},a.setMessageModal=function(a){t(a)},a.setConfirmModal=function(a){l(a)},a.setLoadModal=function(a){i(a)},a.showMessage=function(t,d,l){o(".message-text").html(t),l!==e&&o(".message-modal-title").html(l),"bootstrap"==d?o(v).modal("show"):"materialize"==d?o(v).modal("open"):a.show(v)},a.callAjax=function(a,t,d,l){var n=o(a).html();o(a).addClass("disabled").prop("disabled",1).html(w);var s=o(a).attr("data-index"),i=o(a).attr("data-type"),m=o(a).attr("data-content"),c=T;"load"==d&&(c=C),l!==e&&l.loadModal!==e&&(c=l.loadModal);var r=o(a).attr("data-ajax"),p=AmsifyHelper.getFormData(o(a).parent("form"),!0),u={};console.info(d,o(a).data()),u.afterSuccess=function(e){o(a).attr("data-ajax-redirect")?window.location=o(a).attr("data-ajax-redirect"):(f(c,t),AmsifyTable.tableOperation(i,m,s,e.html),o(a).removeClass("disabled").prop("disabled",0).html(n))},u.afterResponseError=function(e){o(a).removeClass("disabled").prop("disabled",0).html(n)},AmsifyHelper.callAjax(r,p,u)},a.show=function(a){o(a).css({display:"block",visibility:"visible"}),y()},a.hide=function(a){o(a).css({display:"none",visibility:"none"}),y()}}(window.AmsifyModal=window.AmsifyModal||{},jQuery);